<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="IGHelp.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Manage and Maintain">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="This topic describes how you backup your IG database. It describes things you need to consider before you back up, and provides some background on the process including what files are included in the backup." />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Back up IG Server database</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.5.5.0.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Tablestyles/ClearswiftBasic.css" rel="stylesheet" />
        <link href="../../Resources/Tablestyles/WarningTable.css" rel="stylesheet" />
        <link href="../../Resources/Tablestyles/TipTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Clearswift/Generic.css" rel="stylesheet" />
        <link href="../../Resources/Tablestyles/NoteTable.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.5.5.0_custom.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.offcanvas.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap">
            <div class="off-canvas-wrap" data-offcanvas="">
                <section class="inner-wrap">
                    <nav class="tab-bar" data-mc-ignore="true">
                        <section class="middle tab-bar-section outer-row clearfix">
                            <div class="relative clearfix"><a class="logo" href="../../Home.htm" alt="Logo"></a>
                                <div class="navigation-wrapper">
                                    <ul class="navigation clearfix">
                                        <li><a href="../GetStarted/GSJumpOff.htm">Get Started</a>
                                        </li>
                                        <li><a href="../Configure/CONJumpOff.htm">Configure</a>
                                        </li>
                                        <li><a href="../ProtectYourContent/WRKCONTENTJumpOff.htm">Protect your Content</a>
                                        </li>
                                        <li><a href="MOMJumpOff.htm">Manage and Maintain</a>
                                        </li>
                                        <li><a href="../Report/REPJumpOff.htm">Report</a>
                                        </li>
                                        <li><a href="../Reference/REFJumpOff.htm">Reference</a>
                                        </li>
                                        <li><a href="../Introduction/INTROKnownIssues.htm">Known issues in this release</a>
                                        </li>
                                        <li><a href="../Legal/LegalCopyrightAndTrademarks.htm">Legal</a>
                                        </li>
                                    </ul>
                                </div><a class="menu-icon right-off-canvas-toggle" href="#"><span></span></a>
                            </div>
                        </section>
                        <div class="nav-search row outer-row">
                            <form class="search" action="#">
                                <div class="search-bar search-bar-container needs-pie">
                                    <input class="search-field needs-pie" type="search" placeholder="What can we help you find?" />
                                    <div class="search-filter-wrapper">
                                        <div class="search-filter">
                                            <div class="search-filter-content">
                                                <ul>
                                                    <li>All Files</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="search-submit-wrapper" dir="ltr">
                                        <div class="search-submit" title="Search">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </nav>
                    <aside class="right-off-canvas-menu" data-mc-ignore="true">
                        <ul class="off-canvas-list" data-mc-back-link="Back" data-mc-css-tree-node-expanded="has-submenu" data-mc-css-tree-node-collapsed="has-submenu" data-mc-css-sub-menu="right-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.fndtn.offcanvas" data-mc-toc="True">
                        </ul>
                    </aside>
                    <section class="main-section">
                        <div class="row outer-row" data-mc-content-body="True">
                            <form class="search" action="#">
                                <div class="search-bar search-bar-container needs-pie _Skins_HomeSearchBar mc-component">
                                    <input class="search-field needs-pie" type="search" placeholder="What can we find for you?" />
                                    <div class="search-filter-wrapper">
                                        <div class="search-filter">
                                            <div class="search-filter-content">
                                                <ul>
                                                    <li>All Files</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="search-submit-wrapper" dir="ltr">
                                        <div class="search-submit" title="What can we find for you?">
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <p>&#160;</p>
                            <div class="OtherTopic-8-4">
                                <div>
                                    <h1>Back up IG Server database</h1>
                                    <p>You can back up your IG Server database by running a script from a Clearswift Server Console terminal session.</p>
                                    <p>The script will back up all user defined data including system settings and document fingerprints. This means that the process will provide a copy of all database data files.</p>
                                    <h4 style="font-family: 'Trebuchet MS';">Tell me about...</h4>
                                    <ul>
                                        <li value="1">
                                            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />What I need to consider before running the backup</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>You need to consider where you want the backup to be placed. As the database has the potential to grow, you will need to ensure that suitable space is available. You can back up to:</p>
                                                    <ul>
                                                        <li value="1">A locally mounted partition with dedicated space for backups</li>
                                                        <li value="2">A remote server with dedicated space for backups via SSH</li>
                                                    </ul>
                                                    <table style="mc-table-style: url('../../Resources/TableStyles/WarningTable.css');margin-left: 0;margin-right: auto;caption-side: top;mc-caption-repeat: true;width: 95%;" class="TableStyle-WarningTable" cellspacing="0">
                                                        <col class="TableStyle-WarningTable-Column-Column1" />
                                                        <col class="TableStyle-WarningTable-Column-Column2" />
                                                        <tbody>
                                                            <tr>
                                                                <td class="TableStyle-WarningTable-BodyB-Column1-">&#160;</td>
                                                                <td class="TableStyle-WarningTable-BodyA-Column2-">You should never back up to a IG Server system partition for example <span class="FilePathName">root</span>, <span class="FilePathName">/var</span>, <span class="FilePathName">/var/db</span>, <span class="FilePathName">/tmp</span>. Unpredictable results might occur.</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <p>You will also need to decide on the best time to run the backup. The size of the database will dictate how long the process will take, but note that key services, including Gateway processing requests and usage of the Administration UI, will be unavailable while the backup is being performed. We recommend that you perform backups when there is low system activity.</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li value="2">
                                            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />What I do with the backup files after the backup has completed</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>The backup script places a copy of the database files in the target location without compression or any other action. It is up to the IG administrator and your company policy to decide what happens to the backed up data. For example you could:</p>
                                                    <ul>
                                                        <li value="1">Archive</li>
                                                        <li value="2">Burn to CD</li>
                                                        <li value="3">Write to a cloud backup server</li>
                                                    </ul>
                                                    <table style="mc-table-style: url('../../Resources/TableStyles/TipTable.css');margin-left: 0;margin-right: auto;caption-side: top;mc-caption-repeat: true;width: 95%;" class="TableStyle-TipTable" cellspacing="0">
                                                        <col class="TableStyle-TipTable-Column-Column1" />
                                                        <col class="TableStyle-TipTable-Column-Column2" />
                                                        <tbody>
                                                            <tr>
                                                                <td class="TableStyle-TipTable-BodyB-Column1-">&#160;</td>
                                                                <td class="TableStyle-TipTable-BodyA-Column2-">
                                                                    <p>Consider using one of the many dedicated tools available on Ubuntu for managing your backed up data.</p>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </li>
                                        <li value="3">
                                            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Backup automation</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>The IG Server does not provide tools for automated backup. To provide automation to the process, consider creating a <span class="CommandLineCommand">cron</span> job, or use another tool to manage automation.</p>
                                                    <table style="width: 95%;mc-table-style: url('../../Resources/TableStyles/NoteTable.css');margin-left: 0;margin-right: auto;" class="TableStyle-NoteTable" cellspacing="0">
                                                        <col class="TableStyle-NoteTable-Column-Column1" />
                                                        <col class="TableStyle-NoteTable-Column-Column2" />
                                                        <tbody>
                                                            <tr>
                                                                <td class="TableStyle-NoteTable-BodyB-Column1-">&#160;</td>
                                                                <td class="TableStyle-NoteTable-BodyA-Column2-">
                                                                    <p>When you back up to a remote server using SSH, you will need to provide remote server and remote server credentials. If you want to automate this process you should consider setting up password-less authorization between the IG Server and the remote backup server.</p>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                    <h4 style="font-family: 'Trebuchet MS';">How do I...</h4>
                                    <ul>
                                        <li value="1">
                                            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Run the backup script?</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead">If you have direct command-line access to your IG Server, you can follow the steps as described below to complete this task. If you only have remote access, you should enable an SSH session first. <a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Show me how</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <ol style="list-style-type: lower-alpha;">
                                                                <li value="1">
                                                                    <p>From your IG Server <span class="UserInterfacePageName">Home</span> page, click <span class="UserInterfaceButton">System</span> &gt; <span class="UserInterfaceButton">Security</span> &gt; <span class="UserInterfaceButton">SSH Access</span>.</p>
                                                                    <p>SSH configuration options are displayed.</p>
                                                                </li>
                                                                <li value="2">Click <span class="UserInterfaceButton">Edit</span>.</li>
                                                                <li value="3">Select the <span class="UserInterfaceButton">Enable SSH access</span> check box, and type the IP or hostname of the SSH client you want to use to connect to your IG Server.</li>
                                                                <li value="4">Click <span class="UserInterfaceButton">Save</span>.</li>
                                                                <li value="5">
                                                                    <p>From the SSH client, connect to your IG server.</p>
                                                                </li>
                                                            </ol>
                                                            <table style="width: 95%;mc-table-style: url('../../Resources/TableStyles/NoteTable.css');margin-left: 0;margin-right: auto;" class="TableStyle-NoteTable" cellspacing="0">
                                                                <col class="TableStyle-NoteTable-Column-Column1" />
                                                                <col class="TableStyle-NoteTable-Column-Column2" />
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="TableStyle-NoteTable-BodyB-Column1-">&#160;</td>
                                                                        <td class="TableStyle-NoteTable-BodyA-Column2-">
                                                                            <p>Leaving SSH access enabled for extended periods might represent a security risk. You should consider disabling SSH when not using it.</p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <ol>
                                                        <li value="1">
                                                            <p>From the Clearswift Server Console, select <span class="UserInterfaceButton">Open Terminal Session</span>.</p>
                                                            <p>A terminal session window is displayed.</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>To back up to a locally mounted partition, type the following from the command line:</p><pre class="Boxed" xml:space="preserve">sudo igp-backupdatabase [-v] [-q] [-d <span class="CharacterItalic">DBDATADIR</span>] -b <span class="CharacterItalic">DBBACKUPDIR</span> [-l <span class="CharacterItalic">DBLASTBACKUPDIR</span>] </pre>
                                                            <p>To back up to a remote server via SSH, type the following from the command line:</p><pre class="Boxed" xml:space="preserve">sudo igp-backupdatabase [-v] [-q] [-d <span class="CharacterItalic">DBDATADIR</span>] -b <span class="CharacterItalic">DBBACKUPDIR</span> [-l <span class="CharacterItalic">DBLASTBACKUPDIR</span>] -u <span class="CharacterItalic">REMOTEUSER</span> -s <span class="CharacterItalic">REMOTESERVER</span></pre>
                                                            <p>where:</p>
                                                            <table style="mc-table-style: url('../../Resources/TableStyles/ClearswiftBasic.css');margin-left: 0;margin-right: auto;caption-side: top;mc-caption-repeat: true;" class="TableStyle-ClearswiftBasic" cellspacing="2">
                                                                <col class="TableStyle-ClearswiftBasic-Column-Column1" />
                                                                <col class="TableStyle-ClearswiftBasic-Column-Column2" />
                                                                <thead>
                                                                    <tr class="TableStyle-ClearswiftBasic-Head-Header1">
                                                                        <th class="TableStyle-ClearswiftBasic-HeadE-Column1-Header1">Switch</th>
                                                                        <th class="TableStyle-ClearswiftBasic-HeadD-Column2-Header1">Description</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="TableStyle-ClearswiftBasic-Body-Body1">
                                                                        <td class="TableStyle-ClearswiftBasic-BodyE-Column1-Body1">-v </td>
                                                                        <td class="TableStyle-ClearswiftBasic-BodyD-Column2-Body1">Verbose. Provides detailed output status.</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-ClearswiftBasic-Body-Body2">
                                                                        <td class="TableStyle-ClearswiftBasic-BodyE-Column1-Body2">-q</td>
                                                                        <td class="TableStyle-ClearswiftBasic-BodyD-Column2-Body2">Quiet. Suppresses user confirmation prompts.</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-ClearswiftBasic-Body-Body1">
                                                                        <td class="TableStyle-ClearswiftBasic-BodyE-Column1-Body1">-d <span class="CharacterItalic">DBDATADIR</span></td>
                                                                        <td class="TableStyle-ClearswiftBasic-BodyD-Column2-Body1">Path of source database files to back up. You do not need to change this value.</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-ClearswiftBasic-Body-Body2">
                                                                        <td class="TableStyle-ClearswiftBasic-BodyE-Column1-Body2">-b <span class="CharacterItalic">DBBACKUPDIR</span></td>
                                                                        <td class="TableStyle-ClearswiftBasic-BodyD-Column2-Body2">
                                                                            <p>Path to target parent database backup directory. This path is local to the server you are backing up to.</p>
                                                                            <p>Individual backups will be created in this directory in a sub-directory IG-database-backup-<span class="CharacterItalic">%Y-%m-%d_%H-%M-%S</span>.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-ClearswiftBasic-Body-Body1">
                                                                        <td class="TableStyle-ClearswiftBasic-BodyE-Column1-Body1">-u <span class="CharacterItalic">REMOTEUSER</span></td>
                                                                        <td class="TableStyle-ClearswiftBasic-BodyD-Column2-Body1">User account used to connect and write the backup to the remote backup server.</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-ClearswiftBasic-Body-Body2">
                                                                        <td class="TableStyle-ClearswiftBasic-BodyB-Column1-Body2">-s <span class="CharacterItalic">REMOTESERVER</span></td>
                                                                        <td class="TableStyle-ClearswiftBasic-BodyA-Column2-Body2">Host name or IP address of the remote server where the backup will be written to.</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </li>
                                                    </ol>
                                                    <table style="width: 95%;caption-side: top;mc-caption-repeat: true;mc-table-style: url('../../Resources/TableStyles/TipTable.css');margin-left: 0;margin-right: auto;" class="TableStyle-TipTable" cellspacing="0">
                                                        <col class="TableStyle-TipTable-Column-Column1" />
                                                        <col class="TableStyle-TipTable-Column-Column2" />
                                                        <tbody>
                                                            <tr>
                                                                <td class="TableStyle-TipTable-BodyB-Column1-">&#160;</td>
                                                                <td class="TableStyle-TipTable-BodyA-Column2-">
                                                                    <p>Type <span class="CommandLineCommand">sudo igp-backupdatabase -h</span> from the command line for command specific help.</p>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                    <h4 style="font-family: 'Trebuchet MS';">See also...</h4>
                                    <ul>
                                        <li value="1"><a href="MOMRestoreDB.htm" title="Restore IG Server database" alt="Restore IG Server database">Restore IG Server database</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="sideContent">
                                    <ul class="menu _Skins_SideMenu mc-component">
                                        <li class="has-children"><a href="MOMJumpOff.htm">Manage and Maintain</a>
                                            <ul class="sub-menu">
                                                <li><a href="MOMIntro.htm">Monitor IG Server</a>
                                                </li>
                                                <li><a href="MOMApplyUpdates.htm">Apply IG Server updates</a>
                                                </li>
                                                <li><a href="#" class="selected">Back up IG Server database</a>
                                                </li>
                                                <li><a href="MOMRestoreDB.htm">Restore IG Server database</a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section><a class="exit-off-canvas"></a>
                </section>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>